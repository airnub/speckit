rules:
  - id: env.tooling-missing
    label: env.tooling-missing
    description: Missing tool or binary
    patterns:
      - "command not found"
      - "No such file or directory"
      - "pnpm: not found"
    hint: "Install dependencies and ensure pnpm is available (use pnpm install)."
  - id: env.dependency-missing
    label: env.dependency-missing
    description: Missing npm dependency
    patterns:
      - "Cannot find module"
      - "Module not found"
      - "ImportError"
    hint: "Run pnpm install or add the missing dependency."
  - id: logic.api-mismatch
    label: logic.api-mismatch
    description: API usage mismatch
    patterns:
      - "TypeError"
      - "is not a function"
      - "expected arguments"
    hint: "Check library API signatures before calling functions."
  - id: test.harness-broken
    label: test.harness-broken
    description: Test harness failing to start
    patterns:
      - "jest failed to run"
      - "Test environment failed"
      - "Command failed with exit code"
    hint: "Repair the test harness before implementing fixes."
  - id: env.git-state-drift
    label: env.git-state-drift
    description: Git state drift detected
    patterns:
      - "Your branch is ahead"
      - "untracked working tree files"
    hint: "Clean or stash local changes before running the agent."
  - id: process.read-before-write-fail
    label: process.read-before-write-fail
    description: Attempted to read before updating
    patterns:
      - "file not found"
      - "No such file or directory"
      - "ENOENT"
    hint: "Plan the edit before readingâ€”create files prior to referencing them."
